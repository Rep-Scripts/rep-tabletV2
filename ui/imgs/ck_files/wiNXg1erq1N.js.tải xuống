;/*FB_PKG_DELIM*/

/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1-alpha.22",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var b=function(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};return b(a,c)};function c(a,c){if(typeof c!=="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");b(a,c);function d(){this.constructor=a}a.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d())}var d=function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,arguments)};function e(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var f=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,g=Object.keys,h=Array.isArray;typeof Promise!=="undefined"&&!f.Promise&&(f.Promise=Promise);function i(a,b){if(typeof b!=="object")return a;g(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?g:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function aa(a){f.setImmediate?setImmediate(a):setTimeout(a,0)}function ba(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function ca(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function w(a,b){if(l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=w(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:w(d,b.substr(f+1))}return void 0}function x(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)x(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});x(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function da(a,b){typeof b==="string"?x(a,b,void 0):"length"in b&&[].map.call(b,function(b){x(a,b,void 0)})}function ea(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var fa=[].concat;function ga(a){return fa.apply([],a)}var y="Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ga([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return f[a]}),ha=new Set(y.map(function(a){return f[a]}));function ia(a){var b={};for(var c in a)if(l(a,c)){var d=a[c];b[c]=!d||typeof d!=="object"||ha.has(d.constructor)?d:ia(d)}return b}function ja(a){for(var b in a)if(l(a,b))return!1;return!0}var ka=null;function z(a){ka=new WeakMap();a=la(a);ka=null;return a}function la(a){if(!a||typeof a!=="object")return a;var b=ka.get(a);if(b)return b;if(h(a)){b=[];ka.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(la(a[c]))}else if(ha.has(a.constructor))b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);ka.set(a,b);for(d in a)l(a,d)&&(b[d]=la(a[d]))}return b}var ma={}.toString;function na(a){return ma.call(a).slice(8,-1)}var oa=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator",pa=typeof oa==="symbol"?function(a){var b;return a!=null&&(b=a[oa])&&b.apply(a)}:function(){return null};function qa(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1);return b>=0}var ra={};function A(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===ra&&typeof a==="string")return[a];if(e=pa(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var sa=typeof Symbol!=="undefined"?function(a){return a[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ta(a,b){B=a,ua=b}var ua=function(){return!0},va=!new Error("").stack;function C(){if(va)try{C.arguments;throw new Error()}catch(a){return a}return new Error()}function wa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(ua).map(function(a){return"\n"+a}).join("")}y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var D=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];y=y.concat(D);var xa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ya(a,b){this._e=C(),this.name=a,this.message=b}p(ya).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+wa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function za(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function Aa(a,b,c,d){this._e=C(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=za(a,b)}p(Aa).from(ya);function Ba(a,b){this._e=C(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=za(a,this.failures)}p(Ba).from(ya);var Ca=y.reduce(function(a,b){return a[b]=b+"Error",a},{}),Da=ya,E=y.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=C(),this.name=d,!a?(this.message=xa[c]||d,this.inner=null):typeof a==="string"?(this.message="".concat(a).concat(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a)}p(a).from(Da);b[c]=a;return b},{});E.Syntax=SyntaxError;E.Type=TypeError;E.Range=RangeError;var Ea=D.reduce(function(a,b){a[b+"Error"]=E[b];return a},{});function Fa(a,b){if(!a||a instanceof ya||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Ea[a.name])return a;b=new Ea[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}D=y.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=E[b]);return a},{});D.ModifyError=Aa;D.DexieError=ya;D.BulkError=Ba;function F(){}function Ga(a){return a}function Ha(a,b){return a==null||a===Ga?b:function(c){return b(a(c))}}function G(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ia(a,b){return a===F?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?G(d,this.onsuccess):d);e&&(this.onerror=this.onerror?G(e,this.onerror):e);return f!==void 0?f:c}}function Ja(a,b){return a===F?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?G(c,this.onsuccess):c);d&&(this.onerror=this.onerror?G(d,this.onerror):d)}}function Ka(a,b){return a===F?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?G(e,this.onsuccess):e);f&&(this.onerror=this.onerror?G(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function La(a,b){return a===F?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ma(a,b){return a===F?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Na={},Oa=100,Pa=20,Qa=100;y=typeof Promise==="undefined"?[]:function(){var a=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var b=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[b,j(b),a]}();var Ra=y[0],Sa=y[1],Ta=y[2],Ua=Sa&&Sa.then,Va=Ra&&Ra.constructor,Wa=!!Ta,Xa=!1,Ya=Ta?function(){Ta.then(pb)}:f.setImmediate?setImmediate.bind(null,pb):f.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){pb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(pb,0)},Za=function(a,b){eb.push([a,b]),ab&&(Ya(),ab=!1)},$a=!0,ab=!0,H=[],bb=[],cb=null,db=Ga,I={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},J=I,eb=[],K=0,fb=[];function L(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this._lib=!1;var b=this._PSD=J;B&&(this._stackHolder=C(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Na)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&jb(this,this._value);return}this._state=null;this._value=null;++b.ref;ib(this,a)}var gb={get:function(){var a=J,b=Ab;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==Ab),g=f&&!P(),h=new L(function(b,h){lb(e,new hb(Jb(c,a,f,g),Jb(d,a,f,g),b,h,a))});B&&ob(h,this);return h}c.prototype=Na;return c},set:function(a){o(this,"then",a&&a.prototype===Na?gb:{get:function(){return a},set:gb.set})}};m(L.prototype,{then:gb,_then:function(a,b){lb(this,new hb(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):wb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):wb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return wb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Xa=!0;var a=nb(this,[],Pa);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Xa=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new L(function(d,e){var f=setTimeout(function(){return e(new E.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&Symbol.toStringTag&&o(L.prototype,Symbol.toStringTag,"Dexie.Promise");I.env=Gb();function hb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(L,{all:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return L.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof L)return a;if(a&&typeof a.then==="function")return new L(function(b,c){a.then(b,c)});var b=new L(Na,!0,a);ob(b,cb);return b},reject:wb,race:function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.map(function(a){return L.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return Ab}},newPSD:O,usePSD:Hb,scheduler:{get:function(){return Za},set:function(a){Za=a}},rejectionMapper:{get:function(){return db},set:function(a){db=a}},follow:function(a,b){return new L(function(c,d){return O(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=G(function(){var a=this;tb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Va&&(Va.allSettled&&o(L,"allSettled",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return L.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Va.any&&typeof AggregateError!=="undefined"&&o(L,"any",function(){var a=A.apply(null,arguments).map(Db);return new L(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return L.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function ib(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&qb();b&&typeof b.then==="function"?ib(a,function(a,c){b instanceof L?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,kb(a));c&&rb()},jb.bind(null,a))}catch(b){jb(a,b)}}function jb(a,b){bb.push(b);if(a._state!==null)return;var c=a._lib&&qb();b=db(b);a._state=!1;a._value=b;B&&b!==null&&typeof b==="object"&&!b._promise&&ca(function(){var c=r(b,"stack");b._promise=a;o(b,"stack",{get:function(){return Xa?c&&(c.get?c.get.apply(b):c.value):a.stack}})});ub(a);kb(a);c&&rb()}function kb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)lb(a,b[c]);c=a._PSD;--c.ref||c.finalize();K===0&&(++K,Za(function(){--K===0&&sb()},[]))}function lb(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++K;Za(mb,[c,a,b])}function mb(a,b,c){try{cb=b;var d,e=b._value;b._state?d=a(e):(bb.length&&(bb=[]),d=a(e),bb.indexOf(e)===-1&&vb(b));c.resolve(d)}catch(a){c.reject(a)}finally{cb=null,--K===0&&sb(),--c.psd.ref||c.psd.finalize()}}function nb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=wa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}B&&(d=wa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&nb(a._prev,b,c));return b}function ob(a,b){var c=b?b._numPrev+1:0;c<Oa&&(a._prev=b,a._numPrev=c)}function pb(){qb()&&rb()}function qb(){var a=$a;$a=!1;ab=!1;return a}function rb(){var a,b,c;do while(eb.length>0){a=eb;eb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(eb.length>0);$a=!0;ab=!0}function sb(){var a=H;H=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=fb.slice(0);var b=a.length;while(b)a[--b]()}function tb(a){function b(){a(),fb.splice(fb.indexOf(b),1)}fb.push(b);++K;Za(function(){--K===0&&sb()},[])}function ub(a){H.some(function(b){return b._value===a._value})||H.push(a)}function vb(a){var b=H.length;while(b)if(H[--b]._value===a._value){H.splice(b,1);return}}function wb(a){return new L(Na,!1,a)}function M(a,b){var c=J;return function(){var d=qb(),e=J;try{Q(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{Q(e,!1),d&&rb()}}}var N={awaits:0,echoes:0,id:0},xb=0,yb=[],zb=0,Ab=0,Bb=0;function O(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++Bb;var g=I.env;f.env=Wa?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Kb(g.nthen,f),gthen:Kb(g.gthen,f)}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};g=Hb(f,b,c,d);f.ref===0&&f.finalize();return g}function Cb(){N.id||(N.id=++xb);++N.awaits;N.echoes+=Qa;return N.id}function P(){if(!N.awaits)return!1;--N.awaits===0&&(N.id=0);N.echoes=N.awaits*Qa;return!0}(""+Ua).indexOf("[native code]")===-1&&(Cb=P=F);function Db(a){if(N.echoes&&a&&a.constructor===Va){Cb();return a.then(function(a){P();return a},function(a){P();return R(a)})}return a}function Eb(a){++Ab,(!N.echoes||--N.echoes===0)&&(N.echoes=N.id=0),yb.push(J),Q(a,!0)}function Fb(){var a=yb[yb.length-1];yb.pop();Q(a,!1)}function Q(a,b){var c=J;(b?N.echoes&&(!zb++||a!==J):zb&&(!--zb||a!==J))&&Ib(b?Eb.bind(null,a):Fb);if(a===J)return;J=a;c===I&&(I.env=Gb());if(Wa){b=I.env.Promise;var d=a.env;Sa.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(f,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Gb(){var a=f.Promise;return Wa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Sa.then,gthen:a.prototype.then}:{}}function Hb(a,b,c,d,e){var f=J;try{Q(a,!0);return b(c,d,e)}finally{Q(f,!1)}}function Ib(a){Ua.call(Ra,a)}function Jb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&Cb();Q(b,!0);try{return a.apply(this,arguments)}finally{Q(e,!1),d&&Ib(P)}}}function Kb(a,b){return function(c,d){return a.call(this,Jb(c,b),Jb(d,b))}}var R=L.reject;function Lb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return R(new E.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return R(new E.DatabaseClosed());a.open()["catch"](F)}return a._state.dbReadyPromise.then(function(){return Lb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Lb(a,b,c,d)})}return R(e)}return e._promise(b,function(a,b){return O(function(){J.trans=e;return d(a,b,e)})}).then(function(a){if(b==="readwrite")try{e.idbtrans.commit()}catch(a){}return b==="readonly"?a:e._completion.then(function(){return a})})}}y="4.0.1-alpha.22";var Mb=String.fromCharCode(65535),Nb=-Infinity,S="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ob="String expected.",Pb=[],Qb=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Rb=Qb,Sb=Qb,Tb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Ub="__dbnames",Vb="readonly",Wb="readwrite";function Xb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Yb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Zb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=z(b),delete b[a]);return b}:function(a){return a}}function $b(){throw E.Type()}function T(a,b){try{var c=cc(a),d=cc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return bc(dc(a),dc(b));case"Array":return ac(a,b)}}catch(a){}return NaN}function ac(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function bc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function cc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=na(a);return b==="ArrayBuffer"?"binary":b}function dc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var ec=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||J.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new E.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=qb();try{return d&&d.db===this.db?d===J.trans?d._promise(a,f,c):O(function(){return d._promise(a,f,c)},{trans:d,transless:J.transless||J}):Lb(this.db,a,[this.name],f)}finally{g&&rb()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var b=g(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){if(a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})){for(var c=0;c<b.length;++c)if(b.indexOf(a.keyPath[c])===-1)return!1;return!0}return!1}).sort(function(a,b){return a.keyPath.length-b.keyPath.length})[0];if(c&&this.db._maxKey!==Mb){var d=c.keyPath.slice(0,b.length);return this.where(d).equals(d.map(function(b){return a[b]}))}!c&&B&&!1;var e=this.schema.idxByName,f=this.db._deps.indexedDB;function i(a,b){return f.cmp(a,b)===0}d=b.reduce(function(b,c){var d=b[0];b=b[1];var f=e[c],g=a[c];return[d||f,d||!f?Xb(b,f&&f.multi?function(a){a=w(a,c);return h(a)&&a.some(function(a){return i(g,a)})}:function(a){return i(g,w(a,c))}):b]},[null,null]);var j=d[0];d=d[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(d):c?this.filter(d):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"[".concat(a.join("+"),"]"):a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){var b=this,d=b.db,e=b.name;this.schema.mappedClass=a;a.prototype instanceof $b&&(a=function(a){c(b,a);function b(){return a!==null&&a.apply(this,arguments)||this}Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0});b.prototype.table=function(){return e};return b}(a));var f=new Set();for(b=a.prototype;b;b=j(b))Object.getOwnPropertyNames(b).forEach(function(a){return f.add(a)});b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(!f.has(d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=w(a,this.schema.primKey.keyPath);return c===void 0?R(new E.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Zb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{x(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Yb})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba("".concat(e.name,".bulkAdd(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new E.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new E.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Zb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new Ba("".concat(e.name,".bulkPut(): ").concat(b," of ").concat(h," operations failed"),a)})})};a.prototype.bulkUpdate=function(b){var c=this,d=this.core,a=b.map(function(a){return a.key}),e=b.map(function(a){return a.changes}),f=[];return this._trans("readwrite",function(g){return d.getMany({trans:g,keys:a,cache:"clone"}).then(function(h){var i=[],j=[];b.forEach(function(a,b){var d=a.key;a=a.changes;var e=h[b];if(e){for(var g=0,k=Object.keys(a);g<k.length;g++){var l=k[g],m=a[l];if(l===c.schema.primKey.keyPath){if(T(m,d)!==0)throw new E.Constraint("Cannot update primary key in bulkUpdate()")}else x(e,l,m)}f.push(b);i.push(d);j.push(e)}});var k=i.length;return d.mutate({trans:g,type:"put",keys:i,values:j,updates:{keys:a,changeSpecs:e}}).then(function(a){var b=a.numFailures;a=a.failures;if(b===0)return k;for(var d=0,e=Object.keys(a);d<e.length;d++){var g=e[d],h=f[Number(g)];if(h!=null){var i=a[g];delete a[g];a[h]=i}}throw new Ba("".concat(c.name,".bulkUpdate(): ").concat(b," of ").concat(k," operations failed"),a)})})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new Ba("".concat(b.name,".bulkDelete(): ").concat(d," of ").concat(c," operations failed"),a)})};return a}();function fc(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=f;for(var d=1,e=arguments.length;d<e;++d)f(arguments[d]);return c;function f(a,d,e){if(typeof a==="object")return i(a);d||(d=La);e||(e=F);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){g(a).forEach(function(b){var c=a[b];if(h(c))f(b,a[b][0],a[b][1]);else if(c==="asap")var d=f(b,Ga,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){aa(function(){a.apply(null,b)})})});else throw new E.InvalidArgument("Invalid event config")})}}function gc(a,b){p(b).from({prototype:a});return b}function hc(a){return gc(ec.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:fc(null,{creating:[Ia,F],reading:[Ha,Ga],updating:[Ka,F],deleting:[Ja,F]})})}function ic(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function jc(a,b){a.filter=Xb(a.filter,b)}function kc(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Xb(d(),b())}:b;a.justLimit=c&&!d}function lc(a,b){a.isMatch=Xb(a.isMatch,b)}function mc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new E.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function nc(a,b,c){var d=mc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function oc(a,b,c,d){var e=a.replayFilter?Xb(a.filter,a.replayFilter()):a.filter;if(!a.or)return pc(nc(a,d,c),Xb(a.algorithm,e),b,!a.keysOnly&&a.valueMapper);else{var f={},g=function(a,c,d){if(!e||e(c,d,function(a){return c.stop(a)},function(a){return c.fail(a)})){var g=c.primaryKey,h=""+g;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(g));l(f,h)||(f[h]=!0,b(a,c,d))}};return Promise.all([a.or._iterate(g,c),pc(nc(a,d,c),a.algorithm,g,!a.keysOnly&&a.valueMapper)])}}function pc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=M(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=F},function(b){a.fail(b),c=F}))&&f(a.value,a,function(a){return c=a});c()})})}var qc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,R.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,R.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Xb(b.algorithm,a)};a.prototype._iterate=function(a,b){return oc(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return oc(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(ic(c,!0))return d.count({trans:a,query:{index:mc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return oc(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&ic(c,!0)&&c.limit>0){var d=c.valueMapper,e=mc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return oc(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;ic(b)?kc(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):kc(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);kc(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){jc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){jc(this._ctx,function(b){return a(b.value)});lc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&ic(b,!0)&&b.limit>0)return this._read(function(a){var c=mc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};jc(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var b=this,c=this._ctx;return this._write(function(d){var e;if(typeof a==="function")e=a;else{var f=g(a),h=f.length;e=function(b){var c=!1;for(var d=0;d<h;++d){var e=f[d],g=a[e];w(b,e)!==g&&(x(b,e,g),c=!0)}return c}}var i=c.table.core,j=i.schema.primaryKey,k=j.outbound,l=j.extractKey,m=b.db._options.modifyChunkSize||200,n=[],o=0,p=[],q=function(a,b){var c=b.failures;b=b.numFailures;o+=a-b;for(a=0,b=g(c);a<b.length;a++){var d=b[a];n.push(c[d])}};return b.clone().primaryKeys().then(function(b){var f=function(g){var h=Math.min(m,b.length-g);return i.getMany({trans:d,keys:b.slice(g,g+h),cache:"immutable"}).then(function(j){var n=[],o=[],p=k?[]:null,r=[];for(var s=0;s<h;++s){var t=j[s],u={value:z(t),primKey:b[g+s]};e.call(u,u.value,u)!==!1&&(u.value==null?r.push(b[g+s]):!k&&T(l(t),l(u.value))!==0?(r.push(b[g+s]),n.push(u.value)):(o.push(u.value),k&&p.push(b[g+s])))}var v=ic(c)&&c.limit===Infinity&&(typeof a!=="function"||a===rc)&&{index:c.index,range:c.range};return Promise.resolve(n.length>0&&i.mutate({trans:d,type:"add",values:n}).then(function(a){for(var b in a.failures)r.splice(parseInt(b),1);q(n.length,a)})).then(function(){return(o.length>0||v&&typeof a==="object")&&i.mutate({trans:d,type:"put",keys:p,values:o,criteria:v,changeSpec:typeof a!=="function"&&a}).then(function(a){return q(o.length,a)})}).then(function(){return(r.length>0||v&&a===rc)&&i.mutate({trans:d,type:"delete",keys:r,criteria:v}).then(function(a){return q(r.length,a)})}).then(function(){return b.length>g+h&&f(g+m)})})};return f(0).then(function(){if(n.length>0)throw new Aa("Error modifying one or more objects",n,o,p);return b.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return ic(a)&&(a.isPrimKey&&!Sb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new Aa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(rc)};return a}(),rc=function(a,b){return b.value=null};function sc(a){return gc(qc.prototype,function(b,c){this.db=a;var d=Yb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ga?f:null}})}function tc(a,b){return a<b?-1:a===b?0:1}function uc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof Bc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function vc(a){return new a.Collection(a,function(){return Ac("")}).limit(0)}function wc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function xc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function yc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function zc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Ob);function m(a){e=wc(a);f=xc(a);g=a==="next"?tc:uc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=yc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function Ac(a){return{type:1,lower:a,upper:a}}var Bc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?vc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,S)}};a.prototype.equals=function(a){return a==null?U(this,S):new this.Collection(this,function(){return Ac(a)})};a.prototype.above=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Ob):this.between(a,a+Mb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):zc(this,function(a,b){return a.indexOf(b[0])===0},[a],Mb)};a.prototype.equalsIgnoreCase=function(a){return zc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=A.apply(ra,arguments);return a.length===0?vc(this):zc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Mb)};a.prototype.anyOf=function(){var a=this,b=A.apply(ra,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,S)}if(b.length===0)return vc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Nb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=A.apply(ra,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,S)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Nb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return vc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",E.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,S)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=A.apply(ra,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?vc(this):this.inAnyRange(a.map(function(a){return[a,a+Mb]}))};return a}();function Cc(a){return gc(Bc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};this._cmp=this._ascending=T;this._descending=function(a,b){return T(b,a)};this._max=function(a,b){return T(a,b)>0?a:b};this._min=function(a,b){return T(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange;if(!this._IDBKeyRange)throw new E.MissingAPI()})}function W(a){return M(function(b){Dc(b);a(b.target.error);return!1})}function Dc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Ec="storagemutated",X="x-storagemutated-1",Y=fc(null,Ec),Fc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Hb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new E.DatabaseClosed(d);case"MissingAPIError":throw new E.MissingAPI(d.message,d);default:throw new E.OpenFailed(d)}if(!this.active)throw new E.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=M(function(c){Dc(c),b._reject(a.error)});a.onabort=M(function(c){Dc(c),b.active&&b._reject(new E.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=M(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return R(new E.ReadOnly("Transaction is readonly"));if(!this.active)return R(new E.TransactionInactive());if(this._locked())return new L(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return O(function(){var a=new L(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new L(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=L.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new L(function(a,d){c.then(function(c){return b._waitingQueue.push(M(a.bind(null,c)))},function(a){return b._waitingQueue.push(M(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new E.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new E.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Gc(a){return gc(Fc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=fc(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new L(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return R(a)})})}function Hc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Ic(b)}}function Ic(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Jc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:ba(c,function(a){return[a.name,a]})}}function Kc(a){return a.length===1?a[0]:a}var Lc=function(a){try{a.only([[]]);Lc=function(){return[[]]};return[[]]}catch(a){Lc=function(){return Mb};return Mb}};function Mc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Nc(a);else return function(b){return w(b,a)}}function Nc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return w(b,a)}}function Oc(a){return[].slice.call(a)}var Pc=0;function Qc(a){return a==null?":id":typeof a==="string"?a:"[".concat(a.join("+"),"]")}function Rc(a,b,c){function d(a,b){var c=Oc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Mc(b)},indexes:Oc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Mc(b)};f[Qc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Qc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Qc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function e(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var c=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;c=c===void 0?d===void 0?null:b.upperBound(d,!!a):d===void 0?b.lowerBound(c,!!e):b.bound(c,d,!!e,!!a);return c}function f(b){var c=b.name;function d(d){var f=d.trans,b=d.type,a=d.keys,g=d.values,h=d.range;return new Promise(function(d,i){d=M(d);i=f.objectStore(c);var j=i.keyPath==null,k=b==="put"||b==="add";if(!k&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var l=(a||g||{length:1}).length;if(a&&g&&a.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return d({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,Dc(a)};if(b==="deleteRange"){if(h.type===4)return d({numFailures:p,failures:o,results:[],lastResult:void 0});h.type===3?n.push(m=i.clear()):n.push(m=i["delete"](e(h)))}else{j=k?j?[g,a]:[g,null]:[a,null];var r=j[0];j=j[1];if(k)for(k=0;k<l;++k)n.push(m=j&&j[k]!==void 0?i[b](r[k],j[k]):i[b](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=i[b](r[k])),m.onerror=q}var s=function(c){c=c.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});d({numFailures:p,failures:o,results:b==="delete"?a:n.map(function(a){return a.result}),lastResult:c})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(b){var d=b.trans,f=b.values,a=b.query,g=b.reverse,h=b.unique;return new Promise(function(b,i){b=M(b);var j=a.index,k=a.range,l=d.objectStore(c);l=j.isPrimaryKey?l:l.index(j.name);j=g?h?"prevunique":"prev":h?"nextunique":"next";var m=f||!("openKeyCursor"in l)?l.openCursor(e(k),j):l.openKeyCursor(e(k),j);m.onerror=W(i);m.onsuccess=M(function(a){var c=m.result;if(!c){b(null);return}c.___id=++Pc;c.done=!1;var e=c["continue"].bind(c),f=c.continuePrimaryKey;f&&(f=f.bind(c));var g=c.advance.bind(c);a=function(){throw new Error("Cursor not started")};var h=function(){throw new Error("Cursor not stopped")};c.trans=d;c.stop=c["continue"]=c.continuePrimaryKey=c.advance=a;c.fail=M(i);c.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};c.start=function(a){var b=new Promise(function(a,b){a=M(a),m.onerror=W(b),c.fail=b,c.stop=function(b){c.stop=c["continue"]=c.continuePrimaryKey=c.advance=h,a(b)}}),d=function(){if(m.result)try{a()}catch(a){c.fail(a)}else c.done=!0,c.start=function(){throw new Error("Cursor behind last entry")},c.stop()};m.onsuccess=M(function(a){m.onsuccess=d,d()});c["continue"]=e;c.continuePrimaryKey=f;c.advance=g;d();return b};b(c)},i)})}function f(a){return function(b){return new Promise(function(f,g){f=M(f);var h=b.trans,i=b.values,j=b.limit,d=b.query,k=j===Infinity?void 0:j,l=d.index;d=d.range;h=h.objectStore(c);h=l.isPrimaryKey?h:h.index(l.name);l=e(d);if(j===0)return f({result:[]});if(a){d=i?h.getAll(l,k):h.getAllKeys(l,k);d.onsuccess=function(a){return f({result:a.target.result})};d.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return f({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return f({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:c,schema:b,mutate:d,getMany:function(b){var d=b.trans,a=b.keys;return new Promise(function(b,e){b=M(b);var f=d.objectStore(c),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};e=W(e);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=e,++i)}i===0&&b(h)})},get:function(a){var b=a.trans,d=a.key;return new Promise(function(a,e){a=M(a);var f=b.objectStore(c);f=f.get(d);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(e)})},query:f(g),openCursor:a,count:function(b){var a=b.query,d=b.trans,f=a.index,g=a.range;return new Promise(function(a,b){var h=d.objectStore(c);h=f.isPrimaryKey?h:h.index(f.name);var i=e(g);i=i?h.count(i):h.count();i.onsuccess=M(function(b){return a(b.target.result)});i.onerror=W(b)})}}}d=d(a,c);c=d.schema;var g=d.hasGetAll;d=c.tables.map(function(a){return f(a)});var i={};d.forEach(function(a){return i[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=i[a];if(!b)throw new Error("Table '".concat(a,"' not found"));return i[a]},MIN_KEY:-Infinity,MAX_KEY:Lc(b),schema:c}}function Sc(a,b){return b.reduce(function(a,b){b=b.create;return d(d({},a),b(a))},a)}function Tc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Sc(Rc(b,e,d),a.dbcore);return{dbcore:c}}function Uc(a,b){var c=a._novip;a=b.db;a=Tc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Vc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=r(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?o(b,a,{get:function(){return this.table(a)},set:function(b){n(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Wc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Xc(a,b){return a._cfg.version-b._cfg.version}function Yc(a,b,c,d){var e=a._dbSchema,f=a._createTransaction("readwrite",a._storeNames,e);f.create(c);f._completion["catch"](d);var h=f._reject.bind(f),i=J.transless||J;O(function(){J.trans=f,J.transless=i,b===0?(g(e).forEach(function(a){ad(c,a,e[a].primKey,e[a].indexes)}),Uc(a,c),L.follow(function(){return a.on.populate.fire(f)})["catch"](h)):Zc(a,b,f,c)["catch"](h)})}function Zc(a,b,c,d){var e=a._novip,f=[];a=e._versions;var h=e._dbSchema=ed(e,e.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){f.push(function(){var f=h,j=a._cfg.dbschema;hd(e,f,d);hd(e,j,d);h=e._dbSchema=j;var k=$c(f,j);k.add.forEach(function(a){ad(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new E.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return dd(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),dd(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Uc(e,d);c._memoizedTables={};i=!0;var m=ea(j);k.del.forEach(function(a){m[a]=f[a]});Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],g(m),m);c.schema=m;var n=sa(l);n&&Cb();var o;j=L.follow(function(){o=l(c);if(o&&n){var a=P.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?L.resolve(o):j.then(function(){return o})}}),f.push(function(b){if(!i||!Rb){var d=a._cfg.dbschema;cd(d,b)}Wc(e,[e.Transaction.prototype]);Vc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);c.schema=e._dbSchema})});function j(){return f.length?L.resolve(f.shift()(c.idbtrans)).then(j):L.resolve()}return j().then(function(){bd(h,d)})}function $c(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Qb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function ad(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return dd(e,a)});return e}function bd(a,b){g(a).forEach(function(c){b.db.objectStoreNames.contains(c)||ad(b,c,a[c].primKey,a[c].indexes)})}function cd(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function dd(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function ed(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Hc(Ic(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Hc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Jc(a,f,g)});return d}function fd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=ed(a,b,c);a._storeNames=t(b.objectStoreNames,0);Vc(a,[a._allTables],g(c),c)}function gd(a,b){b=ed(a,a.idbdb,b);b=$c(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function hd(a,b,c){a=a._novip;var d=c.db.objectStoreNames;for(var e=0;e<d.length;++e){var g=d[e],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function id(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Hc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var jd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){g(a).forEach(function(c){if(a[c]!==null){var d=id(a[c]),e=d.shift();if(e.multi)throw new E.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new E.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new E.Schema("Index must have a name and cannot be an empty string")});b[c]=Jc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Wc(b,[b._allTables,b,b.Transaction.prototype]);Vc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],g(d),d);b._storeNames=g(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ma(this._cfg.contentUpgrade||F,a);return this};return a}();function kd(a){return gc(jd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ld(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new je(Ub,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function md(a){return a&&typeof a.databases==="function"}function nd(a){var b=a.indexedDB;a=a.IDBKeyRange;return md(b)?Promise.resolve(b.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Ub})}):ld(b,a).toCollection().primaryKeys()}function od(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a).put({name:b})["catch"](F)}function pd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!md(c)&&b!==Ub&&ld(c,a)["delete"](b)["catch"](F)}function qd(a){return O(function(){J.letThrough=!0;return a()})}function rd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return Promise.resolve();var b;return new Promise(function(a){var c=function(){return indexedDB.databases()["finally"](a)};b=setInterval(c,100);c()})["finally"](function(){return clearInterval(b)})}function sd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?R(b.dbOpenError):a});B&&(b.openCanceller._stackHolder=C());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new E.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return L.race([d,(typeof navigator==="undefined"?L.resolve():rd()).then(function(){return new L(function(d,f){e();if(!c)throw new E.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new E.MissingAPI();j.onerror=W(f);j.onblocked=M(a._fireOnBlocked);j.onupgradeneeded=M(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=Dc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=M(function(){f(new E.NoSuchDatabase("Database ".concat(i," doesnt exist")))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Yc(a,e/10,g,f)}},f);j.onsuccess=M(function(){g=null;var c=a._novip.idbdb=j.result,e=t(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Kc(e),"readonly");b.autoSchema?fd(a,c,e):(hd(a,a._dbSchema,e),!gd(a,e));Uc(a,e)}catch(a){}Pb.push(a);c.onversionchange=M(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=M(function(b){a.on("close").fire(b)});h&&od(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return L.resolve(qd(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ma,F);b.onReadyBeingFired=[];return L.resolve(qd(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return R(c)})["finally"](function(){b.openComplete=!0,f()})}function td(a){var b=function(b){return a.next(b)},c=function(b){return a["throw"](b)},d=f(b),e=f(c);function f(a){return function(b){b=a(b);var c=b.value;return b.done?c:!c||typeof c.then!=="function"?h(c)?Promise.all(c).then(d,e):d(c):c.then(d,e)}}return f(b)()}function ud(a,b,c){var d=arguments.length;if(d<2)throw new E.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ga(e);return[a,f,c]}function vd(a,b,c,d,e){return L.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);g.explicit=!0;f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===Ca.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return vd(a,b,c,null,e)})}return R(d)}var h=sa(e);h&&Cb();var i;f=L.follow(function(){i=e.call(g,g);if(i)if(h){var a=P.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=td(i))},f);return(i&&typeof i.then==="function"?L.resolve(i).then(function(a){return g.active?a:R(new E.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return R(a)})})}function wd(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function xd(a){return d(d({},a),{table:function(b){var c=a.table(b);b=c.schema;var e={},f=[];function g(a,b,c){var h=Qc(a),i=e[h]=e[h]||[],j=a==null?0:typeof a==="string"?1:a.length,k=b>0;h=d(d({},c),{name:k?"".concat(h,"(virtual-from:").concat(c.name,")"):c.name,lowLevelIndex:c,isVirtual:k,keyTail:b,keyLength:j,extractKey:Mc(a),unique:!k&&c.unique});i.push(h);h.isPrimaryKey||f.push(h);if(j>1){k=j===2?a[0]:a.slice(0,j-1);g(k,b+1,c)}i.sort(function(a,b){return a.keyTail-b.keyTail});return h}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Qc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:wd(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:wd(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?d(d({},b),{query:{index:a.lowLevelIndex,range:m(b.query.range,a.keyTail)}}):b}k=d(d({},c),{schema:d(d({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return c.count(n(a))},query:function(a){return c.query(n(a))},openCursor:function(d){var b=d.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return c.openCursor(d);function h(b){function c(c){c!=null?b["continue"](wd(c,d.reverse?a.MAX_KEY:a.MIN_KEY,e)):d.unique?b["continue"](b.key.slice(0,g).concat(d.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}c=Object.create(b,{"continue":{value:c},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(wd(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return c}return c.openCursor(n(d)).then(function(a){return a&&h(a)})}});return k}})}var yd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:xd};function zd(a,b,c,d){c=c||{};d=d||"";g(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=na(f),i=na(g);h!==i?c[d+e]=b[e]:h==="Object"?zd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});g(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function Ad(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var Bd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return d(d({},a),{table:function(b){var c=a.table(b),f=c.schema.primaryKey,g=d(d({},c),{mutate:function(a){var g=J.trans,h=g.table(b).hook,i=h.deleting,j=h.creating,k=h.updating;switch(a.type){case"add":if(j.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"put":if(j.fire===F&&k.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"delete":if(i.fire===F)break;return g._promise("readwrite",function(){return m(a)},!0);case"deleteRange":if(i.fire===F)break;return g._promise("readwrite",function(){return n(a)},!0)}return c.mutate(a);function m(b){var g=J.trans,a=b.keys||Ad(f,b);if(!a)throw new Error("Keys missing");b=b.type==="add"||b.type==="put"?d(d({},b),{keys:a}):d({},b);b.type!=="delete"&&(b.values=e([],b.values,!0));b.keys&&(b.keys=e([],b.keys,!0));return Cd(c,b,a).then(function(d){var e=a.map(function(a,c){var e=d[c],h={onerror:null,onsuccess:null};if(b.type==="delete")i.fire.call(h,a,e,g);else if(b.type==="add"||e===void 0){var m=j.fire.call(h,a,b.values[c],g);a==null&&m!=null&&(a=m,b.keys[c]=a,f.outbound||x(b.values[c],f.keyPath,a))}else{m=zd(e,b.values[c]);var n=k.fire.call(h,m,a,e,g);if(n){var o=b.values[c];Object.keys(n).forEach(function(a){l(o,a)?o[a]=n[a]:x(o,a,n[a])})}}return h});return c.mutate(b).then(function(c){var f=c.failures,g=c.results,h=c.numFailures;c=c.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=e[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(b.type==="put"&&d[i]?b.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:c}})["catch"](function(a){e.forEach(function(b){return b.onerror&&b.onerror(a)});return Promise.reject(a)})})}function n(a){return o(a.trans,a.range,1e4)}function o(a,b,e){return c.query({trans:a,values:!1,query:{index:f,range:b},limit:e}).then(function(c){var f=c.result;return m({type:"delete",keys:f,trans:a}).then(function(c){if(c.numFailures>0)return Promise.reject(c.failures[0]);if(f.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return o(a,d(d({},b),{lower:f[f.length-1],lowerOpen:!0}),e)})})}}});return g}})}};function Cd(a,b,c){return b.type==="add"?Promise.resolve([]):a.getMany({trans:b.trans,keys:c,cache:"immutable"})}function Dd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?z(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Ed={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var c=a.table(b);return d(d({},c),{getMany:function(a){if(!a.cache)return c.getMany(a);var b=Dd(a.keys,a.trans._cache,a.cache==="clone");return b?L.resolve(b):c.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?z(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return c.mutate(a)}})}}}};function Fd(a){return!("from"in a)}var Z=function(a,b){if(this)i(this,arguments.length?{d:1,from:a,to:arguments.length>1?b:a}:{d:0});else{var c=new Z();a&&"d"in a&&i(c,a);return c}};m(Z.prototype,(xd={add:function(a){Hd(this,a);return this},addKey:function(a){Gd(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Gd(b,a,a)});return this}},xd[oa]=function(){return Jd(this)},xd));function Gd(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Fd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Gd(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Kd(a)}if(T(b,a.to)>0){e?Gd(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Kd(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Hd(a,d);e&&b&&Hd(a,e)}function Hd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Gd(a,d,e);f&&c(a,f);b&&c(a,b)}Fd(b)||c(a,b)}function Id(a,b){b=Jd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Jd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Jd(a){var b=Fd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Kd(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var c=b==="r"?"l":"r",e=d({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[c];a[c]=e;e.d=Ld(e)}a.d=Ld(a)}function Ld(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}function Md(a,b){return a.trans.mode==="readonly"&&!!a.subscr&&!a.trans.explicit&&a.trans.db._options.cache!=="disabled"&&!b.schema.primaryKey.outbound}function Nd(a,b){switch(a){case"query":return b.values&&!b.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}function Od(a,b){g(b).forEach(function(c){a[c]?Hd(a[c],b[c]):a[c]=ia(b[c])});return a}var Pd={stack:"dbcore",level:0,name:"Observability",create:function(a){var b=a.schema.name,c=new Z(a.MIN_KEY,a.MAX_KEY);return d(d({},a),{transaction:function(b,c,d){if(!J.subscr)return a.transaction(b,c,d);if(c!=="readonly")throw new E.ReadOnly("write transaction not allowed within liveQueries");return a.transaction(b,c,d)},table:function(e){var f=a.table(e),i=f.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=d(d({},f),{mutate:function(g){var k=g.trans,l=g.mutatedParts||(g.mutatedParts={}),m=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return l[a]||(l[a]=new Z())},n=m(""),o=m(":dels"),d=g.type,p=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Ad(j,g).filter(function(a){return a}),g.values]:[],a=p[0];p=p[1];var q=g.trans._cache;if(h(a)){n.addKeys(a);q=d==="delete"||a.length===p.length?Dd(a,q):null;!q&&d!=="add"&&o.addKeys(a);(q||p)&&Qd(m,i,q,p)}else if(a){d={from:a.lower,to:a.upper};o.add(d);n.add(d)}else n.add(c),o.add(c),i.indexes.forEach(function(a){return m(a.name).add(c)});return f.mutate(g).then(function(b){a&&(g.type==="add"||g.type==="put")&&n.addKeys(b.results);k.mutatedParts=Od(k.mutatedParts||{},l);return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};g(o).forEach(function(a){m[a]=function(g){var h=J.subscr,i=!!h,j=Md(J,f)&&Nd(a,g),m=j?g.obsSet={}:h;if(i){var n=function(a){a="idb://".concat(b,"/").concat(e,"/").concat(a);return m[a]||(m[a]=new Z())},p=n(""),q=n(":dels"),r=o[a](g),s=r[0],t=r[1];n(s.name||"").add(t);if(!s.isPrimaryKey)if(a==="count")q.add(c);else{var u=a==="query"&&l&&g.values&&f.query(d(d({},g),{values:!1}));return f[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&g.values)return u.then(function(a){a=a.result;p.addKeys(a);return b});var c=g.values?b.result.map(k):b.result;g.values?p.addKeys(c):q.addKeys(c)}else if(a==="openCursor"){var d=b,e=g.values;return d&&Object.create(d,{key:{get:function(){q.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;q.addKey(a);return a}},value:{get:function(){e&&p.addKey(d.primaryKey);return d.value}}})}return b})}}return f[a].apply(this,arguments)}});return m}})}};function Qd(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);T(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}function Rd(a,b){return b.lower===void 0?!0:b.lowerOpen?T(a,b.lower)>0:T(a,b.lower)>=0}function Sd(a,b){return b.upper===void 0?!0:b.upperOpen?T(a,b.upper)<0:T(a,b.upper)<=0}function Td(a,b){return Rd(a,b)&&Sd(a,b)}function Ud(a,b,c,d,e,f){if(!c||c.length===0)return a;var g=b.query.index;d=d.schema.primaryKey;var h=d.extractKey,i=g.extractKey,j=(g.lowLevelIndex||g).extractKey;d=c.reduce(function(a,c){var d=a,e=c.type==="add"||c.type==="put"?c.values.filter(function(a){return Td(i(a),b.query.range)}).map(function(a){a=z(a);f&&Object.freeze(a);return a}):[];switch(c.type){case"add":d=a.concat(b.values?e:e.map(function(a){return h(a)}));break;case"put":var g=new Z().addKeys(c.values.map(function(a){return h(a)}));d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),g)}).concat(b.values?e:e.map(function(a){return h(a)}));break;case"delete":var j=new Z().addKeys(c.keys);d=a.filter(function(a){a=b.values?h(a):a;return!Id(new Z(a),j)});break;case"deleteRange":var k=c.range;d=a.filter(function(a){return!Td(h(a),k)});break}return d},a);if(d===a)return a;d.sort(function(a,b){return T(j(a),j(b))||T(h(a),h(b))});b.limit&&b.limit<Infinity&&(d.length>b.limit?d.length=b.limit:a.length===b.limit&&d.length<b.limit&&(e.dirty=!0));return f?Object.freeze(d):d}var Vd={};function Wd(a,b){return T(a.lower,b.lower)===0&&T(a.upper,b.upper)===0&&!!a.lowerOpen===!!b.lowerOpen&&!!a.upperOpen===!!b.upperOpen}function Xd(a,b,c,d){if(a===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return 1;if(d)return-1}return a}function Yd(a,b,c,d){if(a===void 0)return b!==void 0?1:0;if(b===void 0)return-1;a=T(a,b);if(a===0){if(c&&d)return 0;if(c)return-1;if(d)return 1}return a}function Zd(a,b){return Xd(a.lower,b.lower,a.lowerOpen,b.lowerOpen)<=0&&Yd(a.upper,b.upper,a.upperOpen,b.upperOpen)>=0}function $d(b,c,a,d){b=Vd["idb://".concat(b,"/").concat(c)];if(!b)return[];c=b.queries[a];if(!c)return[null,!1,b,null];var e=d.query?d.query.index.name:null;c=c[e||""];if(!c)return[null,!1,b,null];switch(a){case"query":e=c.find(function(a){return a.req.limit===d.limit&&a.req.values===d.values&&Wd(a.req.query.range,d.query.range)});if(e)return[e,!0,b,c];a=c.find(function(a){var b="limit"in a.req?a.req.limit:Infinity;return b>=d.limit&&(d.values?a.req.values:!0)&&Zd(a.req.query.range,d.query.range)});return[a,!1,b,c];case"count":e=c.find(function(a){return Wd(a.req.query.range,d.query.range)});return[e,!!e,b,c]}}function ae(a,b){return Object.keys(a).some(function(c){return b[c]&&Id(b[c],a[c])})}var be={},ce=!1;function de(a){Od(be,a),ce||(ce=!0,queueMicrotask(function(){ce=!1;var a=be;be={};ee(a)}))}function ee(a,b){b===void 0&&(b=!1);var c=new Set();for(var d in a){var e=/^idb\:\/\/(.*)\/(.*)\//.exec(d);if(e){var f=e[1];e=e[2];f=Vd["idb://".concat(f,"/").concat(e)];f&&fe(f,a,c,b)}}c.forEach(function(a){return a()})}function fe(a,b,c,d){var e=d&&[];for(var f=0,g=Object.entries(a.queries.query);f<g.length;f++){var h=g[f],i=h[0];h=h[1];var j=d&&[];for(var k=0,h=h;k<h.length;k++){var l=h[k];l.obsSet&&ae(b,l.obsSet)?l.subscribers.forEach(function(a){return c.add(a)}):d&&j.push(l)}d&&e.push([i,j])}if(d)for(l=0,k=e;l<k.length;l++){h=k[l];var i=h[0],j=h[1];a.queries.query[i]=j}}function ge(a,b,c,d){a.subscribers.add(c),d.addEventListener("abort",function(){a.subscribers["delete"](c),a.subscribers.size===0&&he(a,b)})}function he(a,b){setTimeout(function(){a.subscribers.size===0&&qa(b,a)},3e3)}var ie={stack:"dbcore",level:0,name:"Cache",create:function(a){var b=a.schema.name,c=d(d({},a),{transaction:function(c,d,e){var f=a.transaction(c,d,e);if(d==="readwrite"){var g=new AbortController();e=g.signal;var h=function(e){return function(){g.abort();if(d==="readwrite"){var h=new Set();for(var i=0,j=c;i<j.length;i++){var k=j[i],l=Vd["idb://".concat(b,"/").concat(k)];k=a.table(k);if(l){var m=l.optimisticOps.filter(function(a){return a.trans===f});if(m.length>0){l.optimisticOps=l.optimisticOps.filter(function(a){return a.trans!==f});for(var n=0,l=Object.values(l.queries.query);n<l.length;n++){var o=l[n];for(var p=0,q=o.slice();p<q.length;p++){var r=q[p];if(r.res!=null&&f.mutatedParts)if(e&&!r.dirty){var s=Object.isFrozen(r.res);s=Ud(r.res,r.req,m,k,r,s);r.dirty?(qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})):s!==r.res&&(r.res=s,r.promise=L.resolve({result:s}))}else r.dirty&&qa(o,r),r.subscribers.forEach(function(a){return h.add(a)})}}}}}h.forEach(function(a){return a()})}}};f.addEventListener("abort",h(!1),{signal:e});f.addEventListener("error",h(!1),{signal:e});f.addEventListener("complete",h(!0),{signal:e})}return f},table:function(c){var e=a.table(c),f=e.schema.primaryKey,g=d(d({},e),{mutate:function(a){if(f.outbound||J.trans.db._options.cache==="disabled")return e.mutate(a);var g=Vd["idb://".concat(b,"/").concat(c)];if(!g)return e.mutate(a);var h=e.mutate(a);(a.type==="add"||a.type==="put")&&(a.values.length>=50||Ad(f,a).some(function(a){return a==null}))?h.then(function(b){var c=d(d({},a),{values:a.values.map(function(a,c){a=f.keyPath.includes(".")?z(a):d({},a);x(a,f.keyPath,b.results[c]);return a})});g.optimisticOps.push(c);queueMicrotask(function(){return de(a.mutatedParts)})}):(g.optimisticOps.push(a),de(a.mutatedParts),h["catch"](function(){qa(g.optimisticOps,a),de(a.mutatedParts)}));return h},query:function(a){if(!Md(J,e)||!Nd("query",a))return e.query(a);var d=J.trans.db._options.cache==="immutable",f=J,g=f.requery;f=f.signal;var h=$d(b,c,"query",a),i=h[0],j=h[1],k=h[2],l=h[3];if(i&&j)i.obsSet=a.obsSet;else{h=e.query(a).then(function(a){var b=a.result;i.res=b;if(d){for(var c=0,e=b.length;c<e;++c)Object.freeze(b[c]);Object.freeze(b)}else a.result=z(b);return a})["catch"](function(a){l&&i&&qa(l,i);return Promise.reject(a)});i={obsSet:a.obsSet,promise:h,subscribers:new Set(),type:"query",req:a,dirty:!1};l?l.push(i):(l=[i],k||(k=Vd["idb://".concat(b,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map(),optimisticOps:[],unsignaledParts:{}}),k.queries.query[a.query.index.name||""]=l)}ge(i,l,g,f);return i.promise.then(function(b){return{result:Ud(b.result,a,k===null||k===void 0?void 0:k.optimisticOps,e,i,d)}})}});return g}});return c}},je=function(){function a(b,c){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=c=d({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},c);this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange};f=c.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new L(function(a){g.dbReadyResolve=a});g.openCanceller=new L(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=fc(this,"populate","blocked","versionchange","close",{ready:[Ma,F]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||L.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=sc(this);this.Table=hc(this);this.Transaction=Gc(this);this.Version=kd(this);this.WhereClause=Cc(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Lc(c.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Pb.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(Ed);this.use(ie);this.use(Pd);this.use(yd);this.use(Bd);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new E.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new E.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Xc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new L(function(a,c){if(b._state.openComplete)return c(new E.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new E.DatabaseClosed());return}b.open()["catch"](F)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){var a=this;return Hb(I,function(){return sd(a)})};a.prototype._close=function(){var a=this._state,b=Pb.indexOf(this);b>=0&&Pb.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new L(function(b){a.dbReadyResolve=b});a.openCanceller=new L(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new E.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new L(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=M(function(){pd(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new E.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return g(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=ud.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Vb)g=Vb;else if(a=="rw"||a==Wb)g=Wb;else throw new E.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Vb&&g===Wb)if(f)e=null;else throw new E.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new E.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):R(a)}var i=vd.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?Hb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new E.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]};return a}(),ke=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",le=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[ke]=function(){return this};return a}(),me;try{me={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch(a){me={indexedDB:null,IDBKeyRange:null}}function ne(a){var b=!1,c,d=new le(function(d){var e=sa(a);function f(b){e&&Cb();b=O(a,b);e&&b["finally"](P);return b}var g=!1,h,i={},j={},k={get closed(){return g},unsubscribe:function(){if(g)return;g=!0;h&&h.abort();l&&Y.storagemutated.unsubscribe(n)}};d.start&&d.start(k);var l=!1;function m(){return ae(j,i)}var n=function(a){Od(i,a),m()&&o()},o=function(){if(g||!me.indexedDB)return;i={};var a={};h&&h.abort();h=new AbortController();var e={subscr:a,signal:h.signal,requery:o,trans:null},k=f(e);Promise.resolve(k).then(function(f){b=!0;c=f;if(g||e.signal.aborted)return;i={};j=a;!ja(j)&&!l&&(Y(Ec,n),l=!0);d.next&&d.next(f)},function(a){b=!1;if(!["DatabaseClosedError","AbortError"].includes(a===null||a===void 0?void 0:a.name)){if(g)return;d.error&&d.error(a)}})};o();return k});d.hasValue=function(){return b};d.getValue=function(){return c};return d}var oe=je;m(oe,d(d({},D),{"delete":function(a){a=new oe(a,{addons:[]});return a["delete"]()},exists:function(a){return new oe(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return nd(oe.dependencies).then(a)}catch(a){return R(new E.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?Hb(J.transless,a):a()},vip:qd,async:function(a){return function(){try{var b=td(a.apply(this,arguments));return!b||typeof b.then!=="function"?L.resolve(b):b}catch(a){return R(a)}}},spawn:function(a,b,c){try{a=td(a.apply(c,b||[]));return!a||typeof a.then!=="function"?L.resolve(a):a}catch(a){return R(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=L.resolve(typeof a==="function"?oe.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:L,debug:{get:function(){return B},set:function(a){ta(a,a==="dexie"?function(){return!0}:Tb)}},derive:p,extend:i,props:m,override:u,Events:fc,on:Y,liveQuery:ne,extendObservabilitySet:Od,getByKeyPath:w,setByKeyPath:x,delByKeyPath:da,shallowClone:ea,deepClone:z,getObjectDiff:zd,cmp:T,asap:aa,minKey:Nb,addons:[],connections:Pb,errnames:Ca,dependencies:me,cache:Vd,semVer:y,version:y.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));oe.maxKey=Lc(oe.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Ec,function(a){if(!$){var b;Qb?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||pe(a)}));function pe(a){var b=$;try{$=!0,Y.storagemutated.fire(a),ee(a,!0)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var qe=new BroadcastChannel(X);typeof qe.unref==="function"&&qe.unref();Y(Ec,function(a){$||qe.postMessage(a)});qe.onmessage=function(a){a.data&&pe(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Ec,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&e([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&pe(a.changedParts)}});xd=self.document&&navigator.serviceWorker;xd&&xd.addEventListener("message",re)}function re(a){a=a.data;a&&a.type===X&&pe(a.changedParts)}L.rejectionMapper=Fa;ta(B,Tb);D=Object.freeze({__proto__:null,Dexie:je,liveQuery:ne,Entity:$b,cmp:T,"default":je,RangeSet:Z,mergeRanges:Hd,rangesOverlap:Id});d(je,D,{"default":je});return je})}var j=!1;function k(){j||(j=!0,i());return h.exports}function b(a){switch(a){case void 0:return k()}}e.exports=b}),null);
/**
 * License: https://www.facebook.com/legal/license/CCT5pM3qiNk/
 */
__d("tweetnacl-auth-1.0.1",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){"use strict";var g=b("tweetnacl-1.0.3");c={};var h={exports:c};function i(){(function(a,b){typeof h!=="undefined"&&h.exports?h.exports=b(g()):a.nacl.auth=b(a.nacl)})(this,function(a){if(!a)throw new Error("tweetnacl not loaded");var b=128,c=64;function d(d,e){var f=new Uint8Array(b+Math.max(c,d.length)),g;e.length>b&&(e=a.hash(e));for(g=0;g<b;g++)f[g]=54;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);d=a.hash(f.subarray(0,b+d.length));for(g=0;g<b;g++)f[g]=92;for(g=0;g<e.length;g++)f[g]^=e[g];f.set(d,b);return a.hash(f.subarray(0,b+d.length))}function e(a,b){var c=new Uint8Array(32);c.set(d(a,b).subarray(0,32));return c}e.full=function(a,b){return d(a,b)};e.authLength=32;e.authFullLength=64;e.keyLength=32;return e})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("tweetnacl-auth",["tweetnacl-auth-1.0.1"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-auth-1.0.1")()}),null);